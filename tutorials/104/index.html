<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="Astro v1.6.15">
    <link rel="icon" type="image/png" sizes="16x16" href="/TizenSchool/assets/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/TizenSchool/assets/images/favicon-32x32.png">
    <title>How to Create &quot;MetalDetector&quot; App</title>
  <link rel="stylesheet" href="/TizenSchool/assets/aboutus.9016036b.css" />
<link rel="stylesheet" href="/TizenSchool/assets/10.013d619c.css" />
<link rel="stylesheet" href="/TizenSchool/assets/10.0e005638.css" /></head>
  <body>
    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="2r5SHS" component-url="/TizenSchool/Header.fde63186.js" component-export="default" renderer-url="/TizenSchool/client.788af3ea.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Header&quot;,&quot;value&quot;:true}" await-children=""><div class="flex max-w-6xl mx-auto h-[80px] items-center justify-between"><a class="block bg-[url('/TizenSchool/assets/images/logo.png')] w-[212px] h-[52px]" href="/"></a>
  

<div class="flex w-[380px]"><input class="border-b text-lg border-[#436c9b] outline-none grow" value="">
  <div class="w-4 ml-3 bg-search bg-no-repeat bg-center hover:bg-search-hover cursor-pointer"></div></div>
  <a class="self-start text-[15px] pt-1 hover:font-semibold" href="/aboutus/">About us</a></div></astro-island><div class="text-default max-w-6xl mx-auto border-t border-default mt-4">
    <div class="text-3xl font-extrabold text-amber-400 leading-[30px] pt-[30px]">
      How to Create &quot;MetalDetector&quot; App
    </div>
    <div class="flex gap-4 items-end">
      <div class="grow text-lg basis-0">This tutorial shows obtaining and example usage of the magnetometer sensor data provided by the Tizen.Sensor API.</div><div class="flex w-[216px] gap-[10px]">
        <img src="/TizenSchool/assets/images/iot-dimmed.png">
        <img src="/TizenSchool/assets/images/wearable-active.png">
        <img src="/TizenSchool/assets/images/mobile-dimmed.png">
        <img src="/TizenSchool/assets/images/smart-tv-dimmed.png">
      </div>
    </div>
    <div class="mt-7 text-[0.93rem]">
      Created <span class="font-bold mr-8">2018/03/26</span>
            Modified
            <span class="font-bold">2018/10/06</span>
    </div>
  </div><astro-island uid="Z1k1gqD" component-url="/TizenSchool/TextContent.c7f4d9de.js" component-export="default" renderer-url="/TizenSchool/client.788af3ea.js" props="{&quot;pageCount&quot;:[0,17],&quot;toc&quot;:[1,&quot;[[0,{\&quot;page\&quot;:[1,\&quot;[]\&quot;],\&quot;chapter\&quot;:[0,\&quot;\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;1. Overview\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;2. Importing and building solution\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;I. INTRODUCTION\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;1. Goal\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;2. MainPage layout\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;II. APPLICATION UI\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;1. Goal\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;2. Implementing magnetometer service interface\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;3. Implementing magnetometer service\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;4. Implementing metal detector model\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;5. Implementing main view model\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;6. Implementing view\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;III. RADAR ANIMATION\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;1. Goal\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;2. Implementing magnetometer service interface\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;3. Implementing magnetometer service\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;4. Implementing metal detector model\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;5. Implementing main view model\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;6. Implementing converter\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;7. Implementing view\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;IV. SIGNAL STRENGTH AND DIRECTION INDICATION\&quot;]}]]&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;TextContent&quot;,&quot;value&quot;:true}" await-children="">

<div class="flex justify-center h-12 shadow-[0_2px_10px_#cfcfcf] bg-stone-100 my-[40px]"><div class="flex flex-grow justify-center relative items-center max-w-6xl"><button class="w-[184px] h-[34px absolute left-0 rounded-sm font-extrabold text-[17px] leading-[34px] after:content-[''] after:h-[10px] after:w-[10px] after:inline-block after:bg-no-repeat after:bg-center after:ml-3 bg-primary text-white after:rotate-90 S after:bg-arrow hover:bg-[#2aa29e]">Table of Content
</button>




    
<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    border border-[#dfdfdf] bg-arrow-page-grey
  "></div>
<span class="font-extrabold w-28 text-center text-xl text-tutorial">1/17</span>

<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    bg-primary bg-arrow hover:bg-[#2aa29e] cursor-pointer
  "></div></div></div>
<div class="max-w-6xl min-h-[400px] mx-auto text-tutorial"><astro-slot><div class="text-lg tutorial-container"><div class="chapter" style="display: none;"><div></div><h1 id="i-introduction">I. INTRODUCTION</h1><h2 id="1-overview">1. Overview</h2>
<p>In this tutorial, we will create a MetalDetector application which&nbsp;uses Sensor API to obtain the magnetometer sensor data&nbsp;in order to present it on the screen.</p>
<p>First, take a look at the final version of the application.</p>
<p>The application’s UI consists of one page, which contains six image layers.</p>
<img src="/TizenSchool/assets/images/tutorials/104/main-page-layers.png" style="height:1052px; width:680px">
<p>All images together with additional two text labels create a view, that allows the application to indicate the magnetometer sensor detection.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-1-1-1.PNG" style="height:544px; width:400px">
<p>The application’s UI has been designed in the shape of&nbsp;radar. To simulate radar work, one of the images rotates continuously.&nbsp;Two other images are rotated by a certain angle so as to indicate the direction corresponding to the data received from the magnetometer sensor.&nbsp;The source file of one of them varies depending on the signal strength calculated based on the sensor data, so that the signal strength changes are always visible on the screen.&nbsp;In addition, the signal strength value is displayed in the label placed centrally in the application screen, in microtesla units.</p>
<p>Content of this tutorial is under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a> license.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="i-introduction">I. INTRODUCTION</h1><h2 id="2-importing-and-building-solution">2. Importing and building solution</h2>
<p>In this step, we will import and build Visual Studio solution containing the&nbsp;initial application code.</p>
<p>Step 1: Download and unpack&nbsp;<a href="https://tizenschool.org/assets/images/tutorials/104/metal-detector.zip">metal-detector.zip</a>&nbsp;file.</p>
<p>Step 2: Click File &gt; Open &gt; Project/Solution…
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-import-1.png" style="height:851px; width:1231px"></p>
<p>Step 3: Go to downloaded directory and select MetalDetector.sln file (Microsoft Visual Studio Solution), then click the “Open” button.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-import-2.png" style="undefined">
<p>The solution structure should appear in the Solution Explorer view. It should contain two projects: MetalDetector and MetalDetector.Tizen.Wearable.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-import-3.png" style="undefined">
<p>Step 4: Right click on the solution and select “Restore NuGet Packages” from the context menu. This will set up NuGet packages for all projects.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-import-4.png" style="undefined">
<p>Step 5: Right click on the solution again and select “Clean Solution” from the context menu.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-import-5.png" style="undefined">
<p>Step 6: Right click on the solution again and select “Rebuild Solution” from the context menu.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-import-6.png" style="undefined">
<p>Step 7: Right click on the “MetalDetector.Tizen.Wearable” project and select “Set as StartUp Project” from the context menu.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-import-7.png" style="undefined">
<p>Right now, the application can be run on the emulator or target device. We will start with the base version of the application. The application displays “black screen” and nothing more happens. But don’t worry, we will implement all application’s features&nbsp;in the next steps.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-1-2-1.PNG" style="height:544px; width:400px">

</div><div class="chapter" style="display: none;"><div></div><h1 id="ii-application-ui">II. APPLICATION UI</h1><h2 id="1-goal">1. Goal</h2>
<p>The goal of this tutorial’s part is to&nbsp;create the application’s UI designed in the shape of&nbsp;radar, as it is described in the Introduction &gt; Overview chapter.</p>
<p>At the end of this chapter, the application’s UI should contain all elements, which are&nbsp;necessary to indicate the magnetometer sensor detection.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-1-1_before.PNG" style="height:544px; width:400px">
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-1-1_after.PNG" style="height:544px; width:400px">
<p>The obtained layout of elements will be static. The following chapters will provide information on what to do to revive the application screen.</p>
<p>So, let’s begin.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="ii-application-ui">II. APPLICATION UI</h1><h2 id="2-mainpage-layout">2. MainPage layout</h2>
<p>We will modify MetalDetector/MetalDetectorApp.xaml and&nbsp;MetalDetector/Views/MainPage.xaml files of the project.</p>
<p>Step 1: Extend the MetalDetector/MetalDetectorApp class with MainPage definition. From&nbsp;now, the&nbsp;MetalDetector/Views/MainPage class will be treated as the application main page.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 84px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 112px; top: 140px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;?</span><span style="color: #905">xml</span><span style="color: #690"> version</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">1.0</span><span style="color: #999">"</span><span style="color: #690"> encoding</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">utf-8</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">?&gt;</span></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Application</span><span style="color: #BBBBBB"> </span><span style="color: #690">xmlns</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://xamarin.com/schemas/2014/forms</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">x</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://schemas.microsoft.com/winfx/2009/xaml</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">views</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">clr-namespace:MetalDetector.Views</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">x</span><span style="color: #999">:</span><span style="color: #690">Class</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">MetalDetector.MetalDetectorApp</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Application.MainPage</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">views</span><span style="color: #999">:</span><span style="color: #905">MainPage</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">Application.MainPage</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">Application</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: In the MetalDetector/Views/MainPage.xaml file&nbsp;create AbsoluteLayout element inside the Content of the ContentPage, which fills the entire application screen.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 140px; top: 140px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;?</span><span style="color: #905">xml</span><span style="color: #690"> version</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">1.0</span><span style="color: #999">"</span><span style="color: #690"> encoding</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">utf-8</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">?&gt;</span></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">ContentPage</span><span style="color: #BBBBBB"> </span><span style="color: #690">xmlns</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://xamarin.com/schemas/2014/forms</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">x</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://schemas.microsoft.com/winfx/2009/xaml</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">x</span><span style="color: #999">:</span><span style="color: #690">Class</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">MetalDetector.Views.MainPage</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">VerticalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                        </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">ContentPage</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>In all other steps of this page we will make changes to the&nbsp;MetalDetector/Views/MainPage.xaml file.</p>
<p>Step 3: Create Image element responsible for providing the&nbsp;application&nbsp;background. This element is positioned absolutely so that it fills the entire application screen.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 112px; top: 84px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">VerticalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                    </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">background.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-2-1.PNG" style="height:544px; width:400px">
<p>Step 4: Create Image element responsible for displaying the application screen frame. This element is positioned absolutely so that it fills the entire application screen.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 112px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">VerticalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                    </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">background.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">frame.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-2-2.PNG" style="height:544px; width:400px">
<p>Step 5: Create AbsoluteLayout element, which will group the rest of the UI elements, in order to display them only when the metal detector is ready to use.&nbsp;At this stage of development&nbsp;the AbsoluteLayout element will be visible. Conditional hiding will be implemented later.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 112px; top: 84px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">background.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">frame.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 6: Create Image element responsible for displaying the signal strength indicator. This element is positioned absolutely so that it fills the entire application screen. The source of the image will be changed later via binding,&nbsp;in order to display&nbsp;image corresponding to the current signal strength.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 112px; top: 168px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">background.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">signal_strength_0.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">frame.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-2-3.PNG" style="height:544px; width:400px">
<p>Step 7: Create Image element responsible for displaying texts indicating medium and high level of the signal strength value. This element is positioned absolutely so that it fills the entire application screen.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 112px; top: 168px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">signal_strength_0.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">text.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-2-4.PNG" style="height:544px; width:400px">
<p>Step 8: Create Image element responsible for radar work simulation. This element is positioned absolutely so that it fills the entire application screen.&nbsp;Continuous rotation of this element will be implemented later.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 112px; top: 84px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">text.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">radar.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-2-5.PNG" style="height:544px; width:400px">
<p>Step 9: Create Image element responsible for indicating the direction from which the detection took place. This element is positioned absolutely so that it fills the entire application screen.&nbsp;Rotation of the image will be changed later via binding.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 112px; top: 84px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">radar.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">signal_direction_indicator_on.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-2-6.PNG" style="height:544px; width:400px">
<p>Step 10: Create StackLayout elements containing Label elements responsible for displaying signal strength value. These elements&nbsp;are positioned absolutely so that they are located in the middle of the&nbsp;application screen.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 448px; top: 84px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">signal_direction_indicator_on.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">StackLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 154, 360, AutoSize</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                 </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">Label</span><span style="color: #BBBBBB"> </span><span style="color: #690">FontSize</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">10</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Center</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">Text</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">TextColor</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">White</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">StackLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">StackLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 186, 360, AutoSize</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                 </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">Label</span><span style="color: #BBBBBB"> </span><span style="color: #690">FontSize</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">7</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Center</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">Text</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">µT</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">               </span><span style="color: #690">TextColor</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">White</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">StackLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">AbsoluteLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-2-2-7.PNG" style="height:544px; width:400px">

</div><div class="chapter" style="display: none;"><div></div><h1 id="iii-radar-animation">III. RADAR ANIMATION</h1><h2 id="1-goal-1">1. Goal</h2>
<p>The goal of this tutorial’s part is to&nbsp;start animation giving the radar effect. The application should start the animation and make it visible only when the metal detector is ready to use.</p>
<p>So, let’s begin.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iii-radar-animation">III. RADAR ANIMATION</h1><h2 id="2-implementing-magnetometer-service-interface">2. Implementing magnetometer service interface</h2>
<p>We have to implement&nbsp; <strong>MagnetometerService</strong> &nbsp;class, which allows the application to obtain magnetometer data using the Tizen Sensor API.</p>
<p>For now, we need to know whether the magnetometer sensor is supported. If it is, the application will start it.</p>
<p>We will modify the MetalDetector.Tizen.Wearable/Service/MagnetometerService.cs file of the project.</p>
<p>Step 1: Create private _magnetometer field, which will store an instance of the Magnetometer class provided by the Tizen Sensor API.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 56px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 280px; top: 336px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Models</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Tizen</span><span style="color: #BBBBBB">.</span><span style="color: #000">Wearable</span><span style="color: #BBBBBB">.</span><span style="color: #000">Service</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Tizen</span><span style="color: #BBBBBB">.</span><span style="color: #000">Sensor</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">[</span><span style="color: #07A">assembly</span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #999">.</span><span style="color: #000">Forms</span><span style="color: #999">.</span><span style="color: #000">Dependency</span><span style="color: #999">(</span><span style="color: #07A">typeof</span><span style="color: #999">(</span><span style="color: #000">MagnetometerService</span><span style="color: #999">))]</span></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Tizen</span><span style="color: #999">.</span><span style="color: #000">Wearable</span><span style="color: #999">.</span><span style="color: #000">Service</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Magnetometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Magnetometer class instance used for registering callbacks for the magnetometer</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> and getting the magnetometer data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #BBBBBB"> </span><span style="color: #000">_magnetometer</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MagnetometerService class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MagnetometerService</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: Create an instance of the Magnetometer class in the constructor.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> MagnetometerService class constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MagnetometerService</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_magnetometer</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 3: Create public&nbsp;IsSupported method, which will return a flag indicating&nbsp;whether magnetometer is supported or not.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 252px; top: 252px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> MagnetometerService class constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MagnetometerService</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_magnetometer</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the magnetometer is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether magnetometer is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSupported</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 4: Create public&nbsp;Start method&nbsp;which starts the magnetometer sensor.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 504px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> MagnetometerService class constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MagnetometerService</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_magnetometer</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts the magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #A67F59">!</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSensing</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the magnetometer is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether magnetometer is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSupported</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 5: Create public&nbsp;Stop method, which stops the magnetometer sensor.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 448px; top: 476px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts the magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #A67F59">!</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSensing</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Stops the magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Stop</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #A67F59">!</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSensing</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the magnetometer is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether magnetometer is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSupported</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iii-radar-animation">III. RADAR ANIMATION</h1><h2 id="3-implementing-magnetometer-service">3. Implementing magnetometer service</h2>
<p>We have to implement <strong>IMagnetometerService</strong> &nbsp;interface, in the portable part of the application, which can be implemented on different platforms.</p>
<p>At this development step, we need a service, which provides&nbsp; <strong>IsSupported</strong> , <strong>Start</strong> and <strong>Stop</strong> methods. In the next subchapter we will implement them in the platform’s specific part of the application.</p>
<p>Now, we will modify the MetalDetector/Models/IMagnetometerService.cs file of the project.</p>
<p>Step 1: Define three methods mentioned above.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 532px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Models</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Interface of magnetometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">interface</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Returns true if the magnetometer is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether magnetometer is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Starts magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Stops magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iii-radar-animation">III. RADAR ANIMATION</h1><h2 id="4-implementing-metal-detector-model">4. Implementing metal detector model</h2>
<p>We have to implement&nbsp; <strong>MetalDetectorModel</strong> &nbsp;class, which allows the application to use properties&nbsp;describing metal detector state, as well as to execute provided methods.</p>
<p>For now, it should provide <strong>IsSupported</strong> , <strong>Start</strong> and <strong>Stop</strong> methods, which are needed to&nbsp;achieve the goal of this tutorial’s part.</p>
<p>We will modify the MetalDetector/Models/MetalDetectorModel.cs file of the project.</p>
<p>Step 1: Create private _iMagnetometerService field, which will store an instance of the class implementing IMagnetometerService service.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 252px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Models</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Class defining metal detector model which allows the application to use properties</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> describing metal detector state.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Magnometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MagnetometerModel class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes the model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MetalDetectorModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: Create an instance of the class implementing the&nbsp;IMagnetometerService interface.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 0px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 28px; top: 756px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Models</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Class defining metal detector model which allows the application to use properties</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> describing metal detector state.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Magnometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MagnetometerModel class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes the model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MetalDetectorModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_iMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">DependencyService</span><span style="color: #999">.</span><span style="color: #DD4A68">Get</span><span style="color: #999">&lt;</span><span style="color: #000">IMagnetometerService</span><span style="color: #999">&gt;();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 3: Create IsSupported method returning true, if the metal detector is supported.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 252px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> MagnetometerModel class constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Initializes the model.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MetalDetectorModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">DependencyService</span><span style="color: #999">.</span><span style="color: #DD4A68">Get</span><span style="color: #999">&lt;</span><span style="color: #000">IMagnetometerService</span><span style="color: #999">&gt;();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the metal detector is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether metal detector is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 4: Create Start method which starts the metal detector.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 224px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> MagnetometerModel class constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Initializes the model.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MetalDetectorModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">DependencyService</span><span style="color: #999">.</span><span style="color: #DD4A68">Get</span><span style="color: #999">&lt;</span><span style="color: #000">IMagnetometerService</span><span style="color: #999">&gt;();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the metal detector is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether metal detector is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 5: Create Stop method which stops the metal detector.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 224px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Stops metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Stop</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the metal detector is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether metal detector is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iii-radar-animation">III. RADAR ANIMATION</h1><h2 id="5-implementing-main-view-model">5. Implementing main view model</h2>
<p>We have to implement&nbsp; <strong>MainViewModel</strong> &nbsp;class, which provides abstraction of the view exposing public properties and commands.</p>
<p>We will modify the MetalDetector/ViewModels/MainViewModel.cs file of the project.</p>
<p>Step 1: Create private _metalDetectorModel field, which will store an instance of the MetalDetector class, describing metal detector state and providing&nbsp;methods to manipulate its state.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 0px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 252px; top: 280px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Models</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">ViewModels</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Main view model class for the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Encapsulates presentation logic and state of the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ViewModelBase</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Metal detector model which allows the application to use the metal detector data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MainViewModel class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes the view model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainViewModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: Create an instance of the MetalDetectorModel class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 168px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> MainViewModel class constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Initializes the view model.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainViewModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_metalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 3: Create StartCommand and StopCommand, which will be executed from the view layer&nbsp;to have control over whether the metal detector is started or not.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 56px; top: 0px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 392px; top: 560px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 28px; top: 1260px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 784px; top: 1316px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Models</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #BBBBBB">.</span><span style="color: #000">Windows</span><span style="color: #BBBBBB">.</span><span style="color: #000">Input</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">ViewModels</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Main view model class for the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Encapsulates presentation logic and state of the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ViewModelBase</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Metal detector model which allows the application to use the metal detector data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Command which starts the metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">ICommand</span><span style="color: #BBBBBB"> </span><span style="color: #000">StartCommand</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Command which stops the metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">ICommand</span><span style="color: #BBBBBB"> </span><span style="color: #000">StopCommand</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MainViewModel class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes the view model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainViewModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_metalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #DD4A68">InitCommands</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes view model's commands.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">InitCommands</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">StartCommand</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Command</span><span style="color: #999">(</span><span style="color: #000">ExecuteStart</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">StopCommand</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Command</span><span style="color: #999">(</span><span style="color: #000">ExecuteStop</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Starts the metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ExecuteStart</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Stops the metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ExecuteStop</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 4: Create _ready backing field of the Ready property, which will indicate if the metal detector is ready.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 140px; top: 28px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Backing field of the Ready property.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Metal detector model which allows the application to use the metal detector data.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 5: Create Ready property, which uses private backing field we have already created.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 252px; top: 112px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Command which stops metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">ICommand</span><span style="color: #BBBBBB"> </span><span style="color: #000">StopCommand</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #000">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Indicates if the metal detector is ready.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">Ready</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 6: Set the Ready property to true when the Start command is executed.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts the metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ExecuteStart</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #000">Ready</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">true</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iii-radar-animation">III. RADAR ANIMATION</h1><h2 id="6-implementing-view">6. Implementing view</h2>
<p>We have to implement <strong>MainPage</strong> &nbsp;class by defining the&nbsp;animation of radar image. This animation will be launched when the metal detector model is ready to use. We also have to extend the MetalDetector/MetalDetectorApp class with binding context definition. From&nbsp;now, the&nbsp;MainViewModel class will be available for all application’s&nbsp;visual elements.</p>
<p>We will modify&nbsp;MetalDetector/Views/MainPage.xaml,&nbsp;MetalDetector/Views/MainPage.xaml.cs and MetalDetector/MetalDetectorApp.xaml&nbsp;files of the project.</p>
<p>Step 1: In the&nbsp;MetalDetector/MetalDetectorApp.xaml&nbsp;define the BindingContext of the Application element.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 112px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 112px; top: 280px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;?</span><span style="color: #905">xml</span><span style="color: #690"> version</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">1.0</span><span style="color: #999">"</span><span style="color: #690"> encoding</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">utf-8</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">?&gt;</span></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Application</span><span style="color: #BBBBBB"> </span><span style="color: #690">xmlns</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://xamarin.com/schemas/2014/forms</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">x</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://schemas.microsoft.com/winfx/2009/xaml</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">views</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">clr-namespace:MetalDetector.Views</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">viewModels</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">clr-namespace:MetalDetector.ViewModels</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">x</span><span style="color: #999">:</span><span style="color: #690">Class</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">MetalDetector.MetalDetectorApp</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Application.MainPage</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">views</span><span style="color: #999">:</span><span style="color: #905">MainPage</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">Application.MainPage</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Application.BindingContext</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">viewModels</span><span style="color: #999">:</span><span style="color: #905">MainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">Application.BindingContext</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">Application</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: In the&nbsp;MetalDetector/Views/MainPage.xaml define x:Name property of the radar Image element, in order to reference it from the code behind.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 0px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #669900B3">x</span><span style="color: #999">:</span><span style="color: #690">Name</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">radar</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">radar.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>In the&nbsp;next steps of this page we will modify the MetalDetector/Views/MainPage.xaml.cs file.</p>
<p>Step 3: Create a private field being a reference to the object of the Animation class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 280px; top: 336px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #BBBBBB">.</span><span style="color: #000">Xaml</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Views</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Main (and only one) page of the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Handles UI logic for the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">[</span><span style="color: #000">XamlCompilation</span><span style="color: #999">(</span><span style="color: #000">XamlCompilationOptions</span><span style="color: #999">.</span><span style="color: #000">Compile</span><span style="color: #999">)]</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">partial</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainPage</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ContentPage</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Reference to the object of the Animation class.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> It allows creating and starting the animation of the radar element.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">Animation</span><span style="color: #BBBBBB"> </span><span style="color: #000">_radarAnimation</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> The page constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Creates page structure defined in the XAML file.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainPage</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #DD4A68">InitializeComponent</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 4: Add InitRadarAnimation method, which creates an instance of&nbsp;Animation class.&nbsp;Execute this method in the class constructor.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 252px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 224px; top: 336px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> The page constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Creates page structure defined in the XAML file.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainPage</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #DD4A68">InitializeComponent</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #DD4A68">InitRadarAnimation</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Initializes radar animation.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">InitRadarAnimation</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_radarAnimation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Animation</span><span style="color: #999">(</span><span style="color: #000">v</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">radar</span><span style="color: #999">.</span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">v</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">360</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Created animation will animate the Rotation property of the radar element in the range from 0 to 360 degrees.</p>
<p>Step 5: Create a private field being a reference to the object of the MainViewModel class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 0px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 168px; top: 420px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">ViewModels</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #BBBBBB">.</span><span style="color: #000">Xaml</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Views</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Main (and only one) page of the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Handles UI logic for the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">[</span><span style="color: #000">XamlCompilation</span><span style="color: #999">(</span><span style="color: #000">XamlCompilationOptions</span><span style="color: #999">.</span><span style="color: #000">Compile</span><span style="color: #999">)]</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">partial</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainPage</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ContentPage</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Reference to the object of the MainViewModel class.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> It allows listening to the main view model events and executing its commands.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #000">_mainViewModel</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Reference to the object of the Animation class.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> It allows creating and starting the animation of the radar element.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">Animation</span><span style="color: #BBBBBB"> </span><span style="color: #000">_radarAnimation</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 6: Implement OnAppearing method, which will be executed when the main page of the application becomes visible.&nbsp;It assigns reference to the MainViewModel to the created private field and&nbsp;executes the StartCommand command of this class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 308px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Initializes radar animation.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">InitRadarAnimation</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_radarAnimation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Animation</span><span style="color: #999">(</span><span style="color: #000">v</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">radar</span><span style="color: #999">.</span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">v</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">360</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Performs action when the main page appears.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">protected</span><span style="color: #BBBBBB"> </span><span style="color: #07A">override</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnAppearing</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_mainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">MainViewModel</span><span style="color: #999">)</span><span style="color: #07A">this</span><span style="color: #999">.</span><span style="color: #000">BindingContext</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_mainViewModel</span><span style="color: #999">.</span><span style="color: #000">StartCommand</span><span style="color: #999">.</span><span style="color: #DD4A68">Execute</span><span style="color: #999">(</span><span style="color: #905">null</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 7: Implement OnDisappearing method, which will be executed when the main page disappears.&nbsp;It executes the StopCommand command of the MainViewModel&nbsp;class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 252px; top: 308px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Performs action when the main page appears.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">protected</span><span style="color: #BBBBBB"> </span><span style="color: #07A">override</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnAppearing</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_mainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">MainViewModel</span><span style="color: #999">)</span><span style="color: #07A">this</span><span style="color: #999">.</span><span style="color: #000">BindingContext</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_mainViewModel</span><span style="color: #999">.</span><span style="color: #000">StartCommand</span><span style="color: #999">.</span><span style="color: #DD4A68">Execute</span><span style="color: #999">(</span><span style="color: #905">null</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Performs action when the main page disappears.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Stops metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">protected</span><span style="color: #BBBBBB"> </span><span style="color: #07A">override</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnDisappearing</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_mainViewModel</span><span style="color: #999">.</span><span style="color: #000">StopCommand</span><span style="color: #999">.</span><span style="color: #DD4A68">Execute</span><span style="color: #999">(</span><span style="color: #905">null</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 8: Create handler of PropertyChanged event of the MainViewModel class containing IF statement, which checks if the Ready property has changed.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 28px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 364px; top: 1400px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 28px; top: 1988px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">ViewModels</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #BBBBBB">.</span><span style="color: #000">ComponentModel</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #BBBBBB">.</span><span style="color: #000">Xaml</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Views</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Main (and only one) page of the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Handles UI logic for the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">[</span><span style="color: #000">XamlCompilation</span><span style="color: #999">(</span><span style="color: #000">XamlCompilationOptions</span><span style="color: #999">.</span><span style="color: #000">Compile</span><span style="color: #999">)]</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">partial</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainPage</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ContentPage</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Reference to the object of the MainViewModel class.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> It allows listening to the main view model events and executing its commands.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #000">_mainViewModel</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Reference to the object of the Animation class.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> It allows creating and starting the animation of the radar element.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">Animation</span><span style="color: #BBBBBB"> </span><span style="color: #000">_radarAnimation</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> The page constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Creates page structure defined in the XAML file.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainPage</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #DD4A68">InitializeComponent</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #DD4A68">InitRadarAnimation</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes radar animation.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">InitRadarAnimation</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_radarAnimation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Animation</span><span style="color: #999">(</span><span style="color: #000">v</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">radar</span><span style="color: #999">.</span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">v</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">360</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Handles "PropertyChanged" event of the view model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Starts radar animation.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">sender</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Object firing the event.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">e</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Event arguments.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnPropertyChanged</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">PropertyChangedEventArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">PropertyName</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">==</span><span style="color: #BBBBBB"> </span><span style="color: #07A">nameof</span><span style="color: #999">(</span><span style="color: #000">_mainViewModel</span><span style="color: #999">.</span><span style="color: #000">Ready</span><span style="color: #999">))</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Performs action when the main page appears.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Starts metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">protected</span><span style="color: #BBBBBB"> </span><span style="color: #07A">override</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnAppearing</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_mainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">MainViewModel</span><span style="color: #999">)</span><span style="color: #07A">this</span><span style="color: #999">.</span><span style="color: #000">BindingContext</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_mainViewModel</span><span style="color: #999">.</span><span style="color: #000">PropertyChanged</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+=</span><span style="color: #BBBBBB"> </span><span style="color: #000">OnPropertyChanged</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_mainViewModel</span><span style="color: #999">.</span><span style="color: #000">StartCommand</span><span style="color: #999">.</span><span style="color: #DD4A68">Execute</span><span style="color: #999">(</span><span style="color: #905">null</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 9: Create StartRadarAnimation method, which launches the radar element animation by executing its Commit method. The animation will last two seconds with the rate of 16 frames per second and linear easing. At the end of the full cycle of the&nbsp;animation the Rotation property of the animated element will be reset to zero and the animation will be restarted. Execute the&nbsp;StartRadarAnimation method when the Ready property has changed.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 224px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 84px; top: 700px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Initializes radar animation.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">InitRadarAnimation</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_radarAnimation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Animation</span><span style="color: #999">(</span><span style="color: #000">v</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">radar</span><span style="color: #999">.</span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">v</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">360</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts radar animation.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">StartRadarAnimation</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_radarAnimation</span><span style="color: #999">.</span><span style="color: #DD4A68">Commit</span><span style="color: #999">(</span><span style="color: #07A">this</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">RadarAnimation</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">16</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2000</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">Easing</span><span style="color: #999">.</span><span style="color: #000">Linear</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">v</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">c</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">radar</span><span style="color: #999">.</span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">()</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #905">true</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Handles "PropertyChanged" event of the view model.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts radar animation.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">sender</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Object firing the event.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">e</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Event arguments.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnPropertyChanged</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">PropertyChangedEventArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">PropertyName</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">==</span><span style="color: #BBBBBB"> </span><span style="color: #07A">nameof</span><span style="color: #999">(</span><span style="color: #000">_mainViewModel</span><span style="color: #999">.</span><span style="color: #000">Ready</span><span style="color: #999">))</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #DD4A68">StartRadarAnimation</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>

</div><div class="chapter" style="display: none;"><div></div><h1 id="iv-signal-strength-and-direction-indication">IV. SIGNAL STRENGTH AND DIRECTION INDICATION</h1><h2 id="1-goal-2">1. Goal</h2>
<p>The goal of this tutorial’s part is to implement the metal detector signal strength and direction indication in the application screen.</p>
<p>To achieve this we need to:</p>
<p>At the end of this chapter, the source code of the application will be complete.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iv-signal-strength-and-direction-indication">IV. SIGNAL STRENGTH AND DIRECTION INDICATION</h1><h2 id="2-implementing-magnetometer-service-interface-1">2. Implementing magnetometer service interface</h2>
<p>We have to extend the&nbsp; <strong>IMagnetometerService</strong> &nbsp;interface functionality.&nbsp;From now, it will additionally define an Updated event notifying the application that the sensor data has changed. The Updated event provides arguments of&nbsp; <strong>IMagnetometerDataUpdatedArgs</strong> , which also need to be extended.</p>
<p>Now, we will modify the MetalDetector/Models/IMagnetometerService.cs and&nbsp;MetalDetector/Models/IMagnetometerDataUpdatedArgs.cs&nbsp;files of the project.</p>
<p>Step 1: Define Updated event.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 0px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 252px; top: 252px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Models</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Interface of magnetometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">interface</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Notifies about magnetometer data update.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">event</span><span style="color: #BBBBBB"> </span><span style="color: #000">EventHandler</span><span style="color: #999">&lt;</span><span style="color: #000">IMagnetometerDataUpdatedArgs</span><span style="color: #999">&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">Updated</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Returns true if the magnetometer is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether magnetometer is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Starts magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Stops magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: Define properties of the IMagnetometerDataUpdatedArgs interface.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 504px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Models</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> IMagnetometerDataUpdatedArgs interface class.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Defines properties that should be implemented by class used to notifying about the magnetometer data update.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">interface</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerDataUpdatedArgs</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Value of vector x.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">X</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Value of vector y.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">Y</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Value of vector z.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">Z</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>The&nbsp;IMagnetometerDataUpdatedArgs **** interface defines three properties that can be used to store data provided by the&nbsp;magnetometer sensor.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iv-signal-strength-and-direction-indication">IV. SIGNAL STRENGTH AND DIRECTION INDICATION</h1><h2 id="3-implementing-magnetometer-service-1">3. Implementing magnetometer service</h2>
<p>We have to extend the&nbsp; <strong>MagnetometerService</strong> &nbsp;class functionality by implementing Updated event. It will be invoked whenever the magnetometer sensor data changes. The Updated event provides arguments of&nbsp; <strong>MagnetometerDataUpdatedArgs</strong> class, implementing <strong>IMagnetometerDataUpdatedArgs</strong> interface, which also needs to be extended.</p>
<p>We will modify the MetalDetector.Tizen.Wearable/Service/MagnetometerService.cs and MetalDetector.Tizen.Wearable/Service/MagnetometerDataUpdatedArgs.cs&nbsp;files of the project.</p>
<p>Step 1: Implement the MagnetometerDataUpdatedArgs class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 980px; top: 280px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Models</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Tizen</span><span style="color: #999">.</span><span style="color: #000">Wearable</span><span style="color: #999">.</span><span style="color: #000">Service</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Class defining the structure of the object being the parameter of the MagnetometerDataUpdated event.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MagnetometerDataUpdatedArgs</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">EventArgs</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerDataUpdatedArgs</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Value of vector x.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">X</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Value of vector y.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">Y</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Value of vector z.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">Z</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MagnetometerDataUpdatedArgs class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">x</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">X component of the magnetometer.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">y</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Y component of the magnetometer.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">z</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Z component of the magnetometer.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MagnetometerDataUpdatedArgs</span><span style="color: #999">(</span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">X</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">Y</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">Z</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>In the next step on this page we will update the&nbsp;MetalDetector.Tizen.Wearable/Service/MagnetometerService.cs file.</p>
<p>Step 2: Define Updated event.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 56px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 252px; top: 644px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Models</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Tizen</span><span style="color: #BBBBBB">.</span><span style="color: #000">Wearable</span><span style="color: #BBBBBB">.</span><span style="color: #000">Service</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Tizen</span><span style="color: #BBBBBB">.</span><span style="color: #000">Sensor</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">[</span><span style="color: #07A">assembly</span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #999">.</span><span style="color: #000">Forms</span><span style="color: #999">.</span><span style="color: #000">Dependency</span><span style="color: #999">(</span><span style="color: #07A">typeof</span><span style="color: #999">(</span><span style="color: #000">MagnetometerService</span><span style="color: #999">))]</span></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Tizen</span><span style="color: #999">.</span><span style="color: #000">Wearable</span><span style="color: #999">.</span><span style="color: #000">Service</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Magnetometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Magnetometer class instance used for registering callbacks for the magnetometer</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> and getting the magnetometer data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #BBBBBB"> </span><span style="color: #000">_magnetometer</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Notifies about magnetometer data update.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">event</span><span style="color: #BBBBBB"> </span><span style="color: #000">EventHandler</span><span style="color: #999">&lt;</span><span style="color: #000">IMagnetometerDataUpdatedArgs</span><span style="color: #999">&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">Updated</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 3: Create handler of the&nbsp;DataUpdated event provided by&nbsp;the Tizen Magnetometer class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 308px; top: 252px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the magnetometer is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether magnetometer is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">Magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSupported</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Handles "DataUpdated" event of the Magnetometer object.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Invokes "Updated" event.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">sender</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Object firing the event.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">e</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Event arguments.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnDataUpdated</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">MagnetometerDataUpdatedEventArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Updated</span><span style="color: #A67F59">?</span><span style="color: #999">.</span><span style="color: #DD4A68">Invoke</span><span style="color: #999">(</span><span style="color: #07A">this</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">MagnetometerDataUpdatedArgs</span><span style="color: #999">(</span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">X</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Z</span><span style="color: #999">));</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 4: Attach DataUpdated event handler when the Start method is executed, and detach it when the Stop method is executed.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 420px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 28px; top: 868px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts the magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #A67F59">!</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSensing</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #000">DataUpdated</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+=</span><span style="color: #BBBBBB"> </span><span style="color: #000">OnDataUpdated</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Stops the magnetometer sensor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Stop</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #A67F59">!</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">return</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #000">IsSensing</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #000">DataUpdated</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">-=</span><span style="color: #BBBBBB"> </span><span style="color: #000">OnDataUpdated</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #000">_magnetometer</span><span style="color: #999">.</span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iv-signal-strength-and-direction-indication">IV. SIGNAL STRENGTH AND DIRECTION INDICATION</h1><h2 id="4-implementing-metal-detector-model-1">4. Implementing metal detector model</h2>
<p>We have to extend the&nbsp; <strong>MetalDetectorModel</strong> &nbsp;class by adding methods that allow the application to perform calculations based on the raw data of the magnetometer sensor.&nbsp;We will implement methods that allow indicating whether something is in the range of the sensor ( <strong>IsInRange</strong> property), how close to the sensor ( <strong>SignalStrength</strong> property) and in what direction from the sensor ( <strong>Rotation</strong> property). In addition, we will calculate the relative value of the signal strength ( <strong>RelativeSignalStrength</strong> property) in the range from 0 to 9 to allow the presentation of&nbsp;signal strength in the form of one of 10 levels.</p>
<p>We will modify the MetalDetector/Models/MetalDetectorModel.cs file of the project.</p>
<p>Step 1: Create private MAX_SIGNAL_STRENGTH const, which stores value representing max signal strength.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 140px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Magnometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Max signal strength value.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">const</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">MAX_SIGNAL_STRENGTH</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">5000</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: Create a method that returns resultant vector signal strength based on signal strength&nbsp;vectors for each axis.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 0px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 364px; top: 1708px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Models</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Class defining a metal detector model which allows the application to use properties,</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> describing metal detector state.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Magnometer service which allows obtaining the magnetometer data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Max signal strength value.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">const</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">MAX_SIGNAL_STRENGTH</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">5000</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MagnetometerModel class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes the model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MetalDetectorModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_iMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">DependencyService</span><span style="color: #999">.</span><span style="color: #DD4A68">Get</span><span style="color: #999">&lt;</span><span style="color: #000">IMagnetometerService</span><span style="color: #999">&gt;();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Starts metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Stops metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Stop</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Returns true if the metal detector is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether the metal detector is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Returns resultant vector signal strength created from signal strength</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> vectors for each axis.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">x</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector x.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">y</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector y.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">z</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector z.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Resultant vector signal strength.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateSignalStrength</span><span style="color: #999">(</span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Sqrt</span><span style="color: #999">(</span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">z</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">));</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 3: Create a&nbsp;method that returns signal strength relative to maximal signal strength in a given&nbsp;interval.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 364px; top: 364px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns resultant vector signal strength created from signal strength</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> vectors for each axis.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">x</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector x.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">y</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector y.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">z</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector z.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Resultant vector signal strength.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateSignalStrength</span><span style="color: #999">(</span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Sqrt</span><span style="color: #999">(</span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">z</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">));</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns signal strength relative to maximal signal strength in</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> interval[0, max]. Uses logarithmic scale.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">value</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Signal strength.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">max</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Max value that can be returned.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Signal strength.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateRelativeSignalStrength</span><span style="color: #999">(</span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">max</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #07A">int</span><span style="color: #999">)</span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Ceiling</span><span style="color: #999">(</span><span style="color: #000">value</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">MAX_SIGNAL_STRENGTH</span><span style="color: #BBBBBB"> ?</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #000">max</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Log</span><span style="color: #999">(</span><span style="color: #000">value</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">/</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Log</span><span style="color: #999">(</span><span style="color: #000">MAX_SIGNAL_STRENGTH</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">*</span><span style="color: #BBBBBB"> </span><span style="color: #000">max</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 4: Create a method that returns rotation value in degrees based on electromagnetic strength of x and y axis vectors. It is supported by&nbsp; <strong>ToDegrees</strong> method which&nbsp;converts the number value expressed in radians to degrees.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 616px; top: 252px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the metal detector is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether the metal detector is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Converts the number value expressed in radians to degrees.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">value</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value in radians.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Value in degrees.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ToDegrees</span><span style="color: #999">(</span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">*</span><span style="color: #BBBBBB"> </span><span style="color: #905">180</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">/</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #000">PI</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns rotation value in degrees</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> based on electromagnetic strength of x and y axis vectors.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">x</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector x.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">y</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector y.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Rotation value in degrees.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateRotation</span><span style="color: #999">(</span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">-</span><span style="color: #DD4A68">ToDegrees</span><span style="color: #999">(</span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Atan2</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">-</span><span style="color: #000">y</span><span style="color: #999">));</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns resultant vector signal strength created from signal strength</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> vectors for each axis.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">x</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector x.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">y</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector y.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">z</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value of vector z.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Resultant vector signal strength.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateSignalStrength</span><span style="color: #999">(</span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Sqrt</span><span style="color: #999">(</span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #DD4A68">Pow</span><span style="color: #999">(</span><span style="color: #000">z</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">2</span><span style="color: #999">));</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 5: Create properties needed to store all calculated values.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 672px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Max signal strength value.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">const</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">MAX_SIGNAL_STRENGTH</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">5000</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Indicates if the magnetometer sensor detects something in its range.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">IsInRange</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #000">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Strength level value (in range from 0 to 9).</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">RelativeSignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #000">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Strength level value.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">SignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #000">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Rotation value of the metal detector indicator.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #000">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 6: Create handler of Updated event invoked by the magnetometer service.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 224px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 532px; top: 1008px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> MagnetometerModel class constructor.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Initializes the model.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MetalDetectorModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">DependencyService</span><span style="color: #999">.</span><span style="color: #DD4A68">Get</span><span style="color: #999">&lt;</span><span style="color: #000">IMagnetometerService</span><span style="color: #999">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #000">Updated</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+=</span><span style="color: #BBBBBB"> </span><span style="color: #000">ServiceOnUpdated</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Starts metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Start</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Stops metal detector.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Stop</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Returns true if the metal detector is supported, false otherwise.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Flag indicating whether the metal detector is supported or not.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">_iMagnetometerService</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Handles "Updated" event of the magnetometer service.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Updates public properties that can be used outside the class.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Invokes "Updated" event.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">sender</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Object firing the event.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">e</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Event arguments.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ServiceOnUpdated</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerDataUpdatedArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">X</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Y</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Z</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">SignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #07A">int</span><span style="color: #999">)</span><span style="color: #DD4A68">CalculateSignalStrength</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">RelativeSignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateRelativeSignalStrength</span><span style="color: #999">(</span><span style="color: #000">SignalStrength</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">9</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateRotation</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">IsInRange</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&lt;=</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">-</span><span style="color: #905">1</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">||</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&gt;=</span><span style="color: #BBBBBB"> </span><span style="color: #905">1</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">||</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">y</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&lt;=</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">-</span><span style="color: #905">1</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">||</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&gt;=</span><span style="color: #BBBBBB"> </span><span style="color: #905">1</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Converts the number value expressed in radians to degrees.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">value</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value in radians.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Value in degrees.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ToDegrees</span><span style="color: #999">(</span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">*</span><span style="color: #BBBBBB"> </span><span style="color: #905">180</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">/</span><span style="color: #BBBBBB"> </span><span style="color: #000">Math</span><span style="color: #999">.</span><span style="color: #000">PI</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>The ServiceOnUpdated handler executes methods responsible for calculations and updates created public properties, which can be accessed outside the class.</p>
<p>Step 7: Create Updated&nbsp;event…</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 140px; top: 56px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Notifies about changes in metal detector data.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">event</span><span style="color: #BBBBBB"> </span><span style="color: #000">EventHandler</span><span style="color: #BBBBBB"> </span><span style="color: #000">Updated</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Indicates if the magnetometer sensor detects something in its range.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">IsInRange</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #000">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>…and invoke it to notify the application that the metal detector model properties are updated.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 504px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Handles "Updated" event of the magnetometer service.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Updates public properties that can be used outside the class.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Invokes "Updated" event.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">sender</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Object firing the event.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">e</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Event arguments.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ServiceOnUpdated</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">IMagnetometerDataUpdatedArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">X</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Y</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">float</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Z</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">SignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #07A">int</span><span style="color: #999">)</span><span style="color: #DD4A68">CalculateSignalStrength</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">z</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">RelativeSignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateRelativeSignalStrength</span><span style="color: #999">(</span><span style="color: #000">SignalStrength</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">9</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">CalculateRotation</span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">IsInRange</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">x</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&lt;=</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">-</span><span style="color: #905">1</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">||</span><span style="color: #BBBBBB"> </span><span style="color: #000">x</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&gt;=</span><span style="color: #BBBBBB"> </span><span style="color: #905">1</span><span style="color: #999">)</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">||</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">y</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&lt;=</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">-</span><span style="color: #905">1</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">||</span><span style="color: #BBBBBB"> </span><span style="color: #000">y</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">&gt;=</span><span style="color: #BBBBBB"> </span><span style="color: #905">1</span><span style="color: #999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Updated</span><span style="color: #A67F59">?</span><span style="color: #999">.</span><span style="color: #DD4A68">Invoke</span><span style="color: #999">(</span><span style="color: #07A">this</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">null</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iv-signal-strength-and-direction-indication">IV. SIGNAL STRENGTH AND DIRECTION INDICATION</h1><h2 id="5-implementing-main-view-model-1">5. Implementing main view model</h2>
<p>We have to extend the&nbsp; <strong>MainViewModel</strong> &nbsp;class by creating properties in order to bind them later to the visual elements displayed in the application screen. They will store values provided by the metal detector model.&nbsp;We will also listen for the&nbsp;Updated event of the MetalDetectorModel class and use it to update mentioned properties.</p>
<p>We will modify the MetalDetector/ViewModels/MainViewModel.cs file of the project.</p>
<p>Step 1: Create backing fields of the created properties.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 560px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Backing field of the Ready property.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Backing field of the IsInRange property.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">_isInRange</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Backing field of the RelativeSignalStrength property.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">_relativeSignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Backing field of the SignalStrength property.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">_signalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Backing field of the Rotation property.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">_rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Metal detector model which allows the application to use the metal detector data.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: Create public&nbsp;properties for storing data provided by the metal detector model.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 1008px; top: 252px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Indicates if the metal detector is ready.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">Ready</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Indicates if the metal detector detects something in its range.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">IsInRange</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_isInRange</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_isInRange</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Strength level value (in range from 0 to 9).</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">RelativeSignalStrength</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_relativeSignalStrength</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_relativeSignalStrength</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Strength level value.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">SignalStrength</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_signalStrength</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_signalStrength</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> Rotation value of the metal detector indicator.</span></span>
<span class="line"><span style="color: #999">///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">Rotation</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_rotation</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_rotation</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 3: Create handler of the Updated event of the metal detector model class and&nbsp;update values of all created properties.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 28px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 28px; top: 3304px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 392px; top: 4200px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #BBBBBB">.</span><span style="color: #000">Models</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #BBBBBB">.</span><span style="color: #000">Windows</span><span style="color: #BBBBBB">.</span><span style="color: #000">Input</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">ViewModels</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Main view model class for the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Encapsulates presentation logic and state of the application.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainViewModel</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ViewModelBase</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Backing field of the Ready property.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        //</span><span style="color: #708090"> &lt;summary&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Backing field of the IsInRange property.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">_isInRange</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        //</span><span style="color: #708090"> &lt;summary&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Backing field of the RelativeSignalStrength property.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">_relativeSignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        //</span><span style="color: #708090"> &lt;summary&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Backing field of the SignalStrength property.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">_signalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        //</span><span style="color: #708090"> &lt;summary&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Backing field of the Rotation property.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">_rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">0</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Metal detector model which allows the application to use the metal detector data.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">properties</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Command which starts metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">ICommand</span><span style="color: #BBBBBB"> </span><span style="color: #000">StartCommand</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Command which stops metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #000">ICommand</span><span style="color: #BBBBBB"> </span><span style="color: #000">StopCommand</span><span style="color: #BBBBBB"> </span><span style="color: #999">{</span><span style="color: #BBBBBB"> </span><span style="color: #07A">get</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">set</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Indicates if the metal detector is ready.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">Ready</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_ready</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Indicates if the metal detector detects something in its range.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">bool</span><span style="color: #BBBBBB"> </span><span style="color: #000">IsInRange</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_isInRange</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_isInRange</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Strength level value (in range from 0 to 9).</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">RelativeSignalStrength</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_relativeSignalStrength</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_relativeSignalStrength</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Strength level value.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">int</span><span style="color: #BBBBBB"> </span><span style="color: #000">SignalStrength</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_signalStrength</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_signalStrength</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Rotation value of the metal detector indicator.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">double</span><span style="color: #BBBBBB"> </span><span style="color: #000">Rotation</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">set</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">SetProperty</span><span style="color: #999">(</span><span style="color: #07A">ref</span><span style="color: #BBBBBB"> </span><span style="color: #000">_rotation</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">get</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #000">_rotation</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> MainViewModel class constructor.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes the view model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainViewModel</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_metalDetectorModel</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetectorModel</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #DD4A68">InitCommands</span><span style="color: #999">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #000">Updated</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+=</span><span style="color: #BBBBBB"> </span><span style="color: #000">ModelOnMetalDetectorDataUpdated</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Initializes view model's commands.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">InitCommands</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">StartCommand</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Command</span><span style="color: #999">(</span><span style="color: #000">ExecuteStart</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">StopCommand</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Command</span><span style="color: #999">(</span><span style="color: #000">ExecuteStop</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Starts the metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ExecuteStart</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">if</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">IsSupported</span><span style="color: #999">())</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">Start</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #000">Ready</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #905">true</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Stops the metal detector.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ExecuteStop</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #DD4A68">Stop</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Handles "Updated" event of the metal detector model.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Updates properties bound to the application UI.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">sender</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Object firing the event.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">e</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Event arguments.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ModelOnMetalDetectorDataUpdated</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">EventArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">IsInRange</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #000">IsInRange</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">RelativeSignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #000">RelativeSignalStrength</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">SignalStrength</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #000">SignalStrength</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">Rotation</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">_metalDetectorModel</span><span style="color: #999">.</span><span style="color: #000">Rotation</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iv-signal-strength-and-direction-indication">IV. SIGNAL STRENGTH AND DIRECTION INDICATION</h1><h2 id="6-implementing-converter">6. Implementing converter</h2>
<p>We have to extend the&nbsp; <strong>MainPage.xaml</strong> &nbsp;file by creating bindings to public properties of the&nbsp; <strong>MainViewModel</strong> class.&nbsp;As a result, the application screen will be notified about every changes taking place in the application model.</p>
<p>We will modify the MetalDetector/Views/MainPage.xaml&nbsp;file of the project.</p>
<p>Step 1: Create binding to source of the image responsible for signal strength indication. This binding uses&nbsp; <strong>StrengthLevelToFileNameConverter</strong> class, which also should be initialized.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 84px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 168px; top: 168px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 84px; top: 700px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;?</span><span style="color: #905">xml</span><span style="color: #690"> version</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">1.0</span><span style="color: #999">"</span><span style="color: #690"> encoding</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">utf-8</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">?&gt;</span></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">ContentPage</span><span style="color: #BBBBBB"> </span><span style="color: #690">xmlns</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://xamarin.com/schemas/2014/forms</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">x</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">http://schemas.microsoft.com/winfx/2009/xaml</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">xmlns</span><span style="color: #999">:</span><span style="color: #690">converters</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">clr-namespace:MetalDetector.Converters;assembly=MetalDetector</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #669900B3">x</span><span style="color: #999">:</span><span style="color: #690">Class</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">MetalDetector.Views.MainPage</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">ContentPage.Resources</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">ResourceDictionary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">&lt;</span><span style="color: #905">converters</span><span style="color: #999">:</span><span style="color: #905">StrengthLevelToFileNameConverter</span><span style="color: #BBBBBB"> </span><span style="color: #669900B3">x</span><span style="color: #999">:</span><span style="color: #690">Key</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">strengthLevelToFileNameConverter</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;/</span><span style="color: #905">ResourceDictionary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">ContentPage.Resources</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">VerticalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                        </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                   </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                   </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">background.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">&lt;</span><span style="color: #905">AbsoluteLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                            </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                       </span><span style="color: #690">IsVisible</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">{Binding IsInRange}</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">{Binding RelativeSignalStrength, Converter={StaticResource strengthLevelToFileNameConverter}}</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                       </span><span style="color: #690">Rotation</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">{Binding Rotation}</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">text.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 2: Create binding to the source of the image responsible for signal direction indication.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 308px; top: 196px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #669900B3">x</span><span style="color: #999">:</span><span style="color: #690">Name</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">radar</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">radar.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">Image</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutFlags</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">All</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 0, 1, 1</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Source</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">signal_direction_indicator_off.png</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">       </span><span style="color: #690">Rotation</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">{Binding Rotation}</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Image.Triggers</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">DataTrigger</span><span style="color: #BBBBBB"> </span><span style="color: #690">Binding</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">{Binding IsInRange}</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                     </span><span style="color: #690">TargetType</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Image</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                     </span><span style="color: #690">Value</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">True</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">&lt;</span><span style="color: #905">Setter</span><span style="color: #BBBBBB"> </span><span style="color: #690">Property</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Source</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                    </span><span style="color: #690">Value</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">signal_direction_indicator_on.png</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;/</span><span style="color: #905">DataTrigger</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">Image.Triggers</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">Image</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">StackLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 154, 360, AutoSize</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Label</span><span style="color: #BBBBBB"> </span><span style="color: #690">FontSize</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">10</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Center</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Text</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">TextColor</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">White</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">StackLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Step 3: Create binding to the&nbsp;text property of the label located in the middle of the application screen, which displays signal strength value.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 28px; top: 112px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">&lt;</span><span style="color: #905">StackLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 154, 360, AutoSize</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Label</span><span style="color: #BBBBBB"> </span><span style="color: #690">FontSize</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">10</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Center</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Text</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">{Binding SignalStrength}</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">TextColor</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">White</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">StackLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">&lt;</span><span style="color: #905">StackLayout</span><span style="color: #BBBBBB"> </span><span style="color: #690">AbsoluteLayout.LayoutBounds</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">0, 186, 360, AutoSize</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">             </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">FillAndExpand</span><span style="color: #999">"</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">Label</span><span style="color: #BBBBBB"> </span><span style="color: #690">FontSize</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">7</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Center</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">Text</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">µT</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">           </span><span style="color: #690">TextColor</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">White</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #999">&lt;/</span><span style="color: #905">StackLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Right now the application can be run on the emulator or target device.&nbsp;The values displayed by the application should change depending on the position of the device in relation to metal objects in its immediate vicinity.</p>
<img src="/TizenSchool/assets/images/tutorials/104/metal-detector-final.PNG" style="height:544px; width:400px">
<p>Implementing the indication of the metal detector signal strength and direction, was the last thing we had to do.</p>
<p>The application is now fully functional. Enjoy it.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="iv-signal-strength-and-direction-indication">IV. SIGNAL STRENGTH AND DIRECTION INDICATION</h1><h2 id="7-implementing-view">7. Implementing view</h2>
<p>We have to implement&nbsp; <strong>StrengthLevelToFileNameConverter</strong> &nbsp;class&nbsp;which allows the application to a convert given strength level value to corresponding image file name.</p>
<p>We will modify the MetalDetector/Converters/StrengthLevelToFileNameConverter.cs file of the project.</p>
<p>Step 1: Create private FILENAME_TEMPLATE const field and implement Convert method of the StrengthLevelToFileNameConverter class.</p>

<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                        <div style="height: 252px; top: 308px" class="absolute inset-x-0 code-highlight"></div>
                        <div style="height: 28px; top: 896px" class="absolute inset-x-0 code-highlight"></div>
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">System</span><span style="color: #BBBBBB">.</span><span style="color: #000">Globalization</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Xamarin</span><span style="color: #BBBBBB">.</span><span style="color: #000">Forms</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">namespace</span><span style="color: #BBBBBB"> </span><span style="color: #000">MetalDetector</span><span style="color: #999">.</span><span style="color: #000">Converters</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> Class to convert strength level to corresponding image file name.</span></span>
<span class="line"><span style="color: #999">    ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">StrengthLevelToFileNameConverter</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">IValueConverter</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">fields</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Filename template.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">const</span><span style="color: #BBBBBB"> </span><span style="color: #07A">string</span><span style="color: #BBBBBB"> </span><span style="color: #000">FILENAME_TEMPLATE</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">signal_strength_{0}.png</span><span style="color: #999">"</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">region</span><span style="color: #BBBBBB"> </span><span style="color: #690">methods</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Converts strength level to corresponding image file name.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">value</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value to be converted.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">targetType</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Type of the data binding target property.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">parameter</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Optional conversion parameter.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">culture</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">CultureInfo object allowing culture specific conversion.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">String representing converted date.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">Convert</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">Type</span><span style="color: #BBBBBB"> </span><span style="color: #000">targetType</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">parameter</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">CultureInfo</span><span style="color: #BBBBBB"> </span><span style="color: #000">culture</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">return</span><span style="color: #BBBBBB"> </span><span style="color: #000">String</span><span style="color: #999">.</span><span style="color: #DD4A68">Format</span><span style="color: #999">(</span><span style="color: #000">FILENAME_TEMPLATE</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #07A">int</span><span style="color: #999">)</span><span style="color: #000">value</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Converts back image file name to strength level.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> Not required by the application, so it is not implemented.</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;/</span><span style="color: #905">summary</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">value</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Value to be converted back.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">targetType</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Type of the data binding target property.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">parameter</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">Optional conversion parameter.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">param</span><span style="color: #708090"> </span><span style="color: #690">name</span><span style="color: #999">=</span><span style="color: #999">"</span><span style="color: #690">culture</span><span style="color: #999">"</span><span style="color: #999">&gt;</span><span style="color: #708090">CultureInfo object allowing culture specific conversion.</span><span style="color: #999">&lt;/</span><span style="color: #905">param</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #999">        ///</span><span style="color: #708090"> </span><span style="color: #999">&lt;</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span><span style="color: #708090">Date object representing converted string.</span><span style="color: #999">&lt;/</span><span style="color: #905">returns</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">ConvertBack</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">value</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">Type</span><span style="color: #BBBBBB"> </span><span style="color: #000">targetType</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">parameter</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">CultureInfo</span><span style="color: #BBBBBB"> </span><span style="color: #000">culture</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #07A">throw</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">NotImplementedException</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">#</span><span style="color: #07A">endregion</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body></div></div></astro-slot></div>
<div class="flex justify-center items-center h-12">
<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    border border-[#dfdfdf] bg-arrow-page-grey
  "></div>
<span class="font-extrabold w-28 text-center text-xl text-tutorial">1/17</span>

<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    bg-primary bg-arrow hover:bg-[#2aa29e] cursor-pointer
  "></div></div></astro-island>
    <div class="h-24 bg-gray-100">
      <div class="flex items-center h-full w-[1180px] mx-auto pl-2 text-lg border-t-4 border-primary">
        ©2023
        <span class="font-bold">Tizen School <a class="text-sm font-light underline text-blue-600 pl-1" href="https://github.com/Samsung/TizenSchool/commit/642c4c04779a63be966fa6579cbe2e444ddde584">642c4c04779a63be966fa6579cbe2e444ddde584</a>
        </span>
      </div>
    </div>
  </body>
</html>

