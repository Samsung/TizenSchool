<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="Astro v1.6.15">
    <link rel="icon" type="image/png" sizes="16x16" href="/TizenSchool/assets/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/TizenSchool/assets/images/favicon-32x32.png">
    <title>How to communicate with applications using Message-Port</title>
  <link rel="stylesheet" href="/TizenSchool/assets/aboutus.9016036b.css" />
<link rel="stylesheet" href="/TizenSchool/assets/10.013d619c.css" />
<link rel="stylesheet" href="/TizenSchool/assets/10.0e005638.css" /></head>
  <body>
    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="2r5SHS" component-url="/TizenSchool/Header.fde63186.js" component-export="default" renderer-url="/TizenSchool/client.788af3ea.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Header&quot;,&quot;value&quot;:true}" await-children=""><div class="flex max-w-6xl mx-auto h-[80px] items-center justify-between"><a class="block bg-[url('/TizenSchool/assets/images/logo.png')] w-[212px] h-[52px]" href="/"></a>
  

<div class="flex w-[380px]"><input class="border-b text-lg border-[#436c9b] outline-none grow" value="">
  <div class="w-4 ml-3 bg-search bg-no-repeat bg-center hover:bg-search-hover cursor-pointer"></div></div>
  <a class="self-start text-[15px] pt-1 hover:font-semibold" href="/aboutus/">About us</a></div></astro-island><div class="text-default max-w-6xl mx-auto border-t border-default mt-4">
    <div class="text-3xl font-extrabold text-amber-400 leading-[30px] pt-[30px]">
      How to communicate with applications using Message-Port
    </div>
    <div class="flex gap-4 items-end">
      <div class="grow text-lg basis-0">Tizen applications can communicate with each other using message ports. Applications can send and receive messages through message port communication. The message data type for communication is a map data which consists of a bundle (key and value pair).</div><div class="flex w-[216px] gap-[10px]">
        <img src="/TizenSchool/assets/images/iot-active.png">
        <img src="/TizenSchool/assets/images/wearable-dimmed.png">
        <img src="/TizenSchool/assets/images/mobile-dimmed.png">
        <img src="/TizenSchool/assets/images/smart-tv-dimmed.png">
      </div>
    </div>
    <div class="mt-7 text-[0.93rem]">
      Created <span class="font-bold mr-8">2020/06/21</span>
            Modified
            <span class="font-bold">2020/07/25</span>
    </div>
  </div><astro-island uid="ZcCVt5" component-url="/TizenSchool/TextContent.c7f4d9de.js" component-export="default" renderer-url="/TizenSchool/client.788af3ea.js" props="{&quot;pageCount&quot;:[0,11],&quot;toc&quot;:[1,&quot;[[0,{\&quot;page\&quot;:[1,\&quot;[]\&quot;],\&quot;chapter\&quot;:[0,\&quot;\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Overview\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;Overview\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Introduce API\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Create Service Application\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Create MessagePort\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Send Response Message to UI Application\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;Service Application (C)\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Introduce API\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Create UI Application\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Install Tizen.NET nuget package\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Create MessagePort\\\&quot;]}],[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Send Message to Service Application\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;UI Application (C#)\&quot;]}],[0,{\&quot;page\&quot;:[1,\&quot;[[0,{\\\&quot;title\\\&quot;:[0,\\\&quot;Test\\\&quot;]}]]\&quot;],\&quot;chapter\&quot;:[0,\&quot;Test Communicate\&quot;]}]]&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;TextContent&quot;,&quot;value&quot;:true}" await-children="">

<div class="flex justify-center h-12 shadow-[0_2px_10px_#cfcfcf] bg-stone-100 my-[40px]"><div class="flex flex-grow justify-center relative items-center max-w-6xl"><button class="w-[184px] h-[34px absolute left-0 rounded-sm font-extrabold text-[17px] leading-[34px] after:content-[''] after:h-[10px] after:w-[10px] after:inline-block after:bg-no-repeat after:bg-center after:ml-3 bg-primary text-white after:rotate-90 S after:bg-arrow hover:bg-[#2aa29e]">Table of Content
</button>




    
<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    border border-[#dfdfdf] bg-arrow-page-grey
  "></div>
<span class="font-extrabold w-28 text-center text-xl text-tutorial">1/11</span>

<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    bg-primary bg-arrow hover:bg-[#2aa29e] cursor-pointer
  "></div></div></div>
<div class="max-w-6xl min-h-[400px] mx-auto text-tutorial"><astro-slot><div class="text-lg tutorial-container"><div class="chapter" style="display: none;"><div></div><h1 id="overview">Overview</h1><h2 id="overview-1">Overview</h2>
<p><strong>구조</strong></p>
<p>이 프로젝트는 두개의 애플리케이션 (UI앱-C#, Service앱-C)&nbsp;으로 구성되어 있으며,&nbsp;<br>두개의 애플리케이션 간 message-port를 통해서 data를 주고받는 것을 가이드하는 프로젝트입니다.</p>
<img src="/TizenSchool/assets/images/tutorials/200/MessagePort구조2.jpg" style="height:186px; width:1000px">
<p>Message Port API를 사용하여, UI 애플리케이션에서 Service Application으로 Message를 전달하고 받는 sample을 작성하겠습니다.</p>

</div><div class="chapter" style="display: none;"><div></div><h1 id="service-application-c">Service Application (C)</h1><h2 id="introduce-api">Introduce API</h2>
<p><strong>MessagePort API</strong></p>
<p>참고 : **** <a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CAPI__MESSAGE__PORT__MODULE.html">https://docs.tizen.org/application/native/api/mobile/5.5/group<strong>CAPI</strong>MESSAGE<strong>PORT</strong>MODULE.html</a></p>
<p>1.&nbsp;int&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CAPI__MESSAGE__PORT__MODULE.html#ga45412b2c25c88870f750a7bb2cc43bab">message_port_register_local_port</a>&nbsp;(const char *local_port,&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CAPI__MESSAGE__PORT__MODULE.html#gae22c7c3d228062b1863a0be1dd57881b">message_port_message_cb</a>&nbsp;callback, void *user_data)</p>
<p>service application에 message port를 생성하기 위해 사용하는 API입니다.</p>
<p>2.&nbsp;typedef void(*&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CAPI__MESSAGE__PORT__MODULE.html#gae22c7c3d228062b1863a0be1dd57881b">message_port_message_cb</a>)(int local_port_id, const char *remote_app_id, const char *remote_port, bool trusted_remote_port,&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#gae6bcd5be7bb61f5fa47341d34f5e61c0">bundle</a>&nbsp;*message, void *user_data)</p>
<p>1번 API에 등록할 callback 함수의 타입입니다.</p>
<p>3.&nbsp;int&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CAPI__MESSAGE__PORT__MODULE.html#ga98d793193ff81ee0625a5011159eb506">message_port_check_remote_port</a>(const char *&nbsp;remote_app_id, const char *&nbsp;remote_port, bool *&nbsp;exist&nbsp;)</p>
<p>remote application에 port가 등록이 되어있는지 확인하는 API입니다.</p>
<p>4.&nbsp;int&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CAPI__MESSAGE__PORT__MODULE.html#ga90f78a8b1bd0e0cc9a1b7d7741168825">message_port_send_message_with_local_port</a>(const char *&nbsp;remote_app_id, const char *&nbsp;remote_port,&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#gae6bcd5be7bb61f5fa47341d34f5e61c0">bundle</a>&nbsp;*&nbsp;message, int&nbsp;local_port_id&nbsp;)</p>
<p>remote application으로 message를 전송하는 API 입니다.</p>
<p><strong>Bundle API</strong></p>
<p>참고 :&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html">https://docs.tizen.org/application/native/api/mobile/5.5/group<strong>CORE</strong>LIB<strong>BUNDLE</strong>MODULE.html</a></p>
<p>키, 밸류 쌍의 데이터 구조</p>
<p>1.&nbsp;int&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#ga81490b436c10b3cd268172e22b5bec71">bundle_get_str</a>&nbsp;(<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#gae6bcd5be7bb61f5fa47341d34f5e61c0">bundle</a>&nbsp;*b, const char *key, char **str)</p>
<p>해당 번들에서 주어진 key 값에 들어있는 str값을 얻기위한 API 입니다.</p>
<p>2.&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#gae6bcd5be7bb61f5fa47341d34f5e61c0">bundle</a>&nbsp;*&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#ga52020317b04a3c53eec8dc5d2b8d56d2">bundle_create</a>&nbsp;(void)</p>
<p>새로운 번들을 만듭니다.</p>
<p>3.&nbsp;int&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#gab73352f97eb8504dfd2b711c4ff6f06c">bundle_add_str</a>&nbsp;(<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#gae6bcd5be7bb61f5fa47341d34f5e61c0">bundle</a>&nbsp;*b, const char *key, const char *str)</p>
<p>번들에 키와 밸류를 저장합니다.</p>
<p>4.&nbsp;int&nbsp;<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#ga21054ad876bff896d38a08ebdc14a1b1">bundle_free</a>&nbsp;(<a href="https://docs.tizen.org/application/native/api/mobile/5.5/group__CORE__LIB__BUNDLE__MODULE.html#gae6bcd5be7bb61f5fa47341d34f5e61c0">bundle</a>&nbsp;*b)</p>
<p>새로 만든 번들의 메모리를 해제합니다.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="service-application-c">Service Application (C)</h1><h2 id="create-service-application">Create Service Application</h2>
<p><strong>1. 애플리케이션 생성</strong></p>
<p>참고 :&nbsp;<a href="https://docs.tizen.org/application/native/guides/applications/service-app/">https://docs.tizen.org/application/native/guides/applications/service-app/</a></p>
<p>타이젠 스튜디오에서 새로운 Tizen Project를 선택하고&nbsp;Template -&gt; Native Application -&gt; Service&nbsp;를 선택하여 새로운 Application을 생성합니다.</p>
<p>sample 코드에 맞게 동작하기 위해 Application 이름은 “sample_service_app” 으로 하겠습니다.</p>
<img src="/TizenSchool/assets/images/tutorials/200/CreateServiceApp.JPG" style="height:353px; width:500px">
<p><strong>2. Background Category 등록</strong></p>
<p>Service application이 background에서 계속 동작하도록 background category를 등록해줍니다.</p>
<p>애플리케이션의 tizen-manifest.xml에서 Advanced -&gt; Background Category 에 iot-communication을 하나 추가해줍니다.</p>
<img src="/TizenSchool/assets/images/tutorials/200/backgroundcategory.JPG" style="height:276px; width:650px">
</div><div class="chapter" style="display: none;"><div></div><h1 id="service-application-c">Service Application (C)</h1><h2 id="create-messageport">Create MessagePort</h2>
<p><strong>Local Port 생성</strong></p>
<p>참고 : **** <a href="https://docs.tizen.org/application/native/guides/app-management/message-port/">https://docs.tizen.org/application/native/guides/app-management/message-port/</a></p>
<p>message_port.c 파일을 생성하고 message-port API를 사용하여 Local Port를 생성할 수 있는 함수를 만듭니다.</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">include</span><span style="color: #000"> </span><span style="color: #999">&lt;</span><span style="color: #690">message_port.h</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">include</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">sample_service_app.h</span><span style="color: #999">"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">static</span><span style="color: #000"> </span><span style="color: #07A">int</span><span style="color: #000"> local_port_id</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">static</span><span style="color: #000"> </span><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #DD4A68">message_port_cb</span><span style="color: #999">(</span><span style="color: #07A">int</span><span style="color: #000"> local_port_id</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">remote_port</span><span style="color: #999">,</span></span>
<span class="line"><span style="color: #000">                </span><span style="color: #07A">bool</span><span style="color: #000"> trusted_remote_port</span><span style="color: #999">,</span><span style="color: #000"> bundle </span><span style="color: #A67F59">*</span><span style="color: #000">message</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">user_data</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">data </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #905">NULL</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">int</span><span style="color: #000"> ret</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">bool</span><span style="color: #000"> found</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #708090">    </span><span style="color: #999">/*</span><span style="color: #708090"> From another application </span><span style="color: #999">*/</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #DD4A68">bundle_get_str</span><span style="color: #999">(</span><span style="color: #000">message</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">data</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #A67F59">&amp;</span><span style="color: #000">data</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_INFO</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">Message from %s:%s, data : %s</span><span style="color: #999">"</span><span style="color: #999">,</span></span>
<span class="line"><span style="color: #000">               remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> remote_port</span><span style="color: #999">,</span><span style="color: #000"> data</span><span style="color: #999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #DD4A68">create_bi_directional_message_port</span><span style="color: #999">(</span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">local_port</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #000">	local_port_id </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #DD4A68">message_port_register_local_port</span><span style="color: #999">(</span><span style="color: #000">local_port</span><span style="color: #999">,</span><span style="color: #000"> message_port_cb</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #905">NULL</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">	</span><span style="color: #07A">if</span><span style="color: #000"> </span><span style="color: #999">(</span><span style="color: #000">local_port_id </span><span style="color: #A67F59">&lt;</span><span style="color: #000"> </span><span style="color: #905">0</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #000">	    </span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_ERROR</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">Port register error: %d</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> local_port_id</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">	</span><span style="color: #07A">else</span></span>
<span class="line"><span style="color: #000">	    </span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_INFO</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">port_id: %d</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> local_port_id</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>sample_service_app.h 파일에&nbsp;void create_bi_directional_message_port(const char *local_port) 선언 해줍니다.</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">#</span><span style="color: #07A">ifndef</span><span style="color: #000"> </span><span style="color: #DD4A68">__sample_service_app_H__</span></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">define</span><span style="color: #000"> </span><span style="color: #DD4A68">__sample_service_app_H__</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">include</span><span style="color: #000"> </span><span style="color: #999">&lt;</span><span style="color: #690">dlog.h</span><span style="color: #999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">ifdef</span><span style="color: #000">  </span><span style="color: #DD4A68">LOG_TAG</span></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">undef</span><span style="color: #000">  </span><span style="color: #DD4A68">LOG_TAG</span></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endif</span></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">define</span><span style="color: #000"> </span><span style="color: #DD4A68">LOG_TAG</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">sample_service_app</span><span style="color: #999">"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #DD4A68">create_bi_directional_message_port</span><span style="color: #999">(</span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">local_port</span><span style="color: #999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #999">#</span><span style="color: #07A">endif</span><span style="color: #708090"> </span><span style="color: #999">/*</span><span style="color: #708090"> __sample_service_app_H__ </span><span style="color: #999">*/</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>Service App이 시작할 때 Local Port를 생성할 수 있도록,</p>
<p>sample_service_app.c 파일의 service_app_create 함수에서 create_bi_directional_message_port 함수를 호출해줍니다.</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">bool</span><span style="color: #000"> </span><span style="color: #DD4A68">service_app_create</span><span style="color: #999">(</span><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">data</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #DD4A68">create_bi_directional_message_port</span><span style="color: #999">(</span><span style="color: #999">"</span><span style="color: #690">sample_service_port</span><span style="color: #999">"</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">return</span><span style="color: #000"> </span><span style="color: #905">true</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span></code></pre>
              <div>
            </div></div></div></body>
<p>다른 Application에서 “sample_service_port”로 메시지를 보내면 message_port_cb 콜백함수가 호출되고 로그를 출력합니다.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="service-application-c">Service Application (C)</h1><h2 id="send-response-message-to-ui-application">Send Response Message to UI Application</h2>
<p><strong>응답 메시지 보내기</strong></p>
<p><strong>1. Check remote port</strong></p>
<p>다른 Application에서&nbsp;메시지를 받고나서 응답메시지를 보내기전에, 그 Application의 Local Port를 확인합니다.</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">static</span><span style="color: #000"> </span><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #DD4A68">message_port_cb</span><span style="color: #999">(</span><span style="color: #07A">int</span><span style="color: #000"> local_port_id</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">remote_port</span><span style="color: #999">,</span></span>
<span class="line"><span style="color: #000">                </span><span style="color: #07A">bool</span><span style="color: #000"> trusted_remote_port</span><span style="color: #999">,</span><span style="color: #000"> bundle </span><span style="color: #A67F59">*</span><span style="color: #000">message</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">user_data</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">data </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #905">NULL</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">int</span><span style="color: #000"> ret</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">bool</span><span style="color: #000"> found</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #708090">    </span><span style="color: #999">/*</span><span style="color: #708090"> From another application </span><span style="color: #999">*/</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #DD4A68">bundle_get_str</span><span style="color: #999">(</span><span style="color: #000">message</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">data</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #A67F59">&amp;</span><span style="color: #000">data</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_INFO</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">Message from %s, data : %s</span><span style="color: #999">"</span><span style="color: #999">,</span></span>
<span class="line"><span style="color: #000">               remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> data</span><span style="color: #999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #708090">    </span><span style="color: #999">/*</span><span style="color: #708090"> To the application </span><span style="color: #999">*/</span></span>
<span class="line"><span style="color: #000">    ret </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #DD4A68">message_port_check_remote_port</span><span style="color: #999">(</span><span style="color: #000">remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> remote_port</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #A67F59">&amp;</span><span style="color: #000">found</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">if</span><span style="color: #000"> </span><span style="color: #999">(</span><span style="color: #000">ret </span><span style="color: #A67F59">!=</span><span style="color: #000"> MESSAGE_PORT_ERROR_NONE</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #000">        </span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_ERROR</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">message_port_check_remote_port error: %d</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> ret</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span></code></pre>
              <div>
            </div></div></div></body>
<p><strong>2. Send Response Message</strong></p>
<p>Remote Application의 Port를 확인 후, 존재하면 그 port로 message를 전송합니다. 현재 테스트 하는 코드는 bi-directional 이기 때문에<br>message_port_send_message_with_local_port() API 를 사용합니다.</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">static</span><span style="color: #000"> </span><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #DD4A68">message_port_cb</span><span style="color: #999">(</span><span style="color: #07A">int</span><span style="color: #000"> local_port_id</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">const</span><span style="color: #000"> </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">remote_port</span><span style="color: #999">,</span></span>
<span class="line"><span style="color: #000">                </span><span style="color: #07A">bool</span><span style="color: #000"> trusted_remote_port</span><span style="color: #999">,</span><span style="color: #000"> bundle </span><span style="color: #A67F59">*</span><span style="color: #000">message</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #07A">void</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">user_data</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">char</span><span style="color: #000"> </span><span style="color: #A67F59">*</span><span style="color: #000">data </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #905">NULL</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">int</span><span style="color: #000"> ret</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">bool</span><span style="color: #000"> found</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #708090">    </span><span style="color: #999">/*</span><span style="color: #708090"> From another application </span><span style="color: #999">*/</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #DD4A68">bundle_get_str</span><span style="color: #999">(</span><span style="color: #000">message</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">data</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #A67F59">&amp;</span><span style="color: #000">data</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_INFO</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">Message from %s:%s, data : %s</span><span style="color: #999">"</span><span style="color: #999">,</span></span>
<span class="line"><span style="color: #000">               remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> remote_port</span><span style="color: #999">,</span><span style="color: #000"> data</span><span style="color: #999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #708090">    </span><span style="color: #999">/*</span><span style="color: #708090"> To the application </span><span style="color: #999">*/</span></span>
<span class="line"><span style="color: #000">    ret </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #DD4A68">message_port_check_remote_port</span><span style="color: #999">(</span><span style="color: #000">remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> remote_port</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #A67F59">&amp;</span><span style="color: #000">found</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">if</span><span style="color: #000"> </span><span style="color: #999">(</span><span style="color: #000">ret </span><span style="color: #A67F59">!=</span><span style="color: #000"> MESSAGE_PORT_ERROR_NONE</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #000">        </span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_ERROR</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">message_port_check_remote_port error: %d</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> ret</span><span style="color: #999">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000">    </span><span style="color: #07A">if</span><span style="color: #999">(</span><span style="color: #000">found</span><span style="color: #999">)</span><span style="color: #000"> </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #000">		bundle </span><span style="color: #A67F59">*</span><span style="color: #000">b </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #DD4A68">bundle_create</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #000">		</span><span style="color: #DD4A68">bundle_add_str</span><span style="color: #999">(</span><span style="color: #000">b</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">response data</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">OK</span><span style="color: #999">"</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">		ret </span><span style="color: #A67F59">=</span><span style="color: #000"> </span><span style="color: #DD4A68">message_port_send_message_with_local_port</span><span style="color: #999">(</span><span style="color: #000">remote_app_id</span><span style="color: #999">,</span><span style="color: #000"> remote_port</span><span style="color: #999">,</span><span style="color: #000"> b</span><span style="color: #999">,</span><span style="color: #000"> local_port_id</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">		</span><span style="color: #07A">if</span><span style="color: #000"> </span><span style="color: #999">(</span><span style="color: #000">ret </span><span style="color: #A67F59">!=</span><span style="color: #000"> MESSAGE_PORT_ERROR_NONE</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #000">			</span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_ERROR</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">message_port_send_message error: %d</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #000"> ret</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">		</span><span style="color: #07A">else</span></span>
<span class="line"><span style="color: #000">			</span><span style="color: #DD4A68">dlog_print</span><span style="color: #999">(</span><span style="color: #000">DLOG_INFO</span><span style="color: #999">,</span><span style="color: #000"> LOG_TAG</span><span style="color: #999">,</span><span style="color: #000"> </span><span style="color: #999">"</span><span style="color: #690">Send message done</span><span style="color: #999">"</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">		</span><span style="color: #DD4A68">bundle_free</span><span style="color: #999">(</span><span style="color: #000">b</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #000">    </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #999">}</span></span></code></pre>
              <div>
            </div></div></div></body>

</div><div class="chapter" style="display: none;"><div></div><h1 id="ui-application-c">UI Application (C#)</h1><h2 id="introduce-api-1">Introduce API</h2>
<p><strong>MessagePort API</strong></p>
<p>참고 :&nbsp;<a href="https://samsung.github.io/TizenFX/latest/api/Tizen.Applications.Messages.MessagePort.html">https://samsung.github.io/TizenFX/latest/api/Tizen.Applications.Messages.MessagePort.html</a></p>
<ol>
<li>public MessagePort(string portName, bool trusted)</li>
</ol>
<p>message port 인스턴스를 생성합니다.</p>
<p>2.&nbsp;public event EventHandler<messagereceivedeventargs> MessageReceived</messagereceivedeventargs></p>
<p>remote 에서 메시지를 받았을 때 호출될 함수를 등록합니다.</p>
<ol start="3">
<li>public void Listen()</li>
</ol>
<p>message port를 등록합니다.</p>
<p>4.&nbsp;public void Send(Bundle message, string remoteAppId, string remotePortName)</p>
<p>remoteAppId로 message를 전송합니다.</p>
<p><strong>bundle API</strong></p>
<ol>
<li>public Bundle()</li>
</ol>
<p>번들 객체를 생성합니다.</p>
<p>2.&nbsp;public void AddItem(string key, string value)</p>
<p>번들 객체에 데이터를 넣어줍니다.</p>
</div><div class="chapter" style="display: none;"><div></div><h1 id="ui-application-c">UI Application (C#)</h1><h2 id="create-ui-application">Create UI Application</h2>
<p><strong>1. 애플리케이션 생성</strong></p>
<p>참고 :&nbsp;<a href="https://docs.tizen.org/application/dotnet/get-started/iot/first-app/">https://docs.tizen.org/application/dotnet/get-started/iot/first-app/</a></p>
<p>IOT UI Application을 하나 생성합니다. sample 코드랑 맞추기 위해 프로젝트 이름은 MessagePortSample로 하겠습니다.</p>
<img src="https://docs.tizen.org/application/dotnet/get-started/iot/media/cs_first_building_device.png" style="height:270px; width:480px">
<p><strong>2. 버튼 및 라벨&nbsp;생성</strong></p>
<p>메시지 전송을 위한 간단한 버튼을 하나 생성합니다.</p>
<p>MainPage.xaml 수정</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;</span><span style="color: #905">StackLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">&lt;</span><span style="color: #905">Label</span><span style="color: #BBBBBB"> </span><span style="color: #690">Text</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Welcome to Message Port Application</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">VerticalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">CenterAndExpand</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">CenterAndExpand</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #999">&lt;</span><span style="color: #905">Button</span><span style="color: #BBBBBB"> </span><span style="color: #690">Text</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Send Message</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">BackgroundColor</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">Red</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">HorizontalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">CenterAndExpand</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">VerticalOptions</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">CenterAndExpand</span><span style="color: #999">"</span></span>
<span class="line"><span style="color: #BBBBBB">                </span><span style="color: #690">Clicked</span><span style="color: #BBBBBB">=</span><span style="color: #999">"</span><span style="color: #07A">OnButtonClicked</span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #999">/&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">&lt;/</span><span style="color: #905">StackLayout</span><span style="color: #999">&gt;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">&lt;/</span><span style="color: #905">ContentPage.Content</span><span style="color: #999">&gt;</span></span></code></pre>
              <div>
            </div></div></div></body>
<p>MainPage.xaml.cs 수정</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">[</span><span style="color: #000">XamlCompilation</span><span style="color: #999">(</span><span style="color: #000">XamlCompilationOptions</span><span style="color: #999">.</span><span style="color: #000">Compile</span><span style="color: #999">)]</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">partial</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainPage</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ContentPage</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainPage</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #DD4A68">InitializeComponent</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnButtonClicked</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">EventArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">args</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">Button</span><span style="color: #BBBBBB"> </span><span style="color: #000">button</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #000">Button</span><span style="color: #999">)</span><span style="color: #000">sender</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">button</span><span style="color: #999">.</span><span style="color: #000">BackgroundColor</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #000">Color</span><span style="color: #999">.</span><span style="color: #000">Blue</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">}</span></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="ui-application-c">UI Application (C#)</h1><h2 id="install-tizennet-nuget-package">Install Tizen.NET nuget package</h2>
<p>1,&nbsp; Nuget 패키지 관리 선택</p>
<img src="/TizenSchool/assets/images/tutorials/200/Nuget.jpg" style="height:490px; width:1000px">
<ol start="2">
<li>Tizen.NET 6.0 설치</li>
</ol>
<img src="/TizenSchool/assets/images/tutorials/200/Nuget2.jpg" style="height:487px; width:1000px">
</div><div class="chapter" style="display: none;"><div></div><h1 id="ui-application-c">UI Application (C#)</h1><h2 id="create-messageport-1">Create MessagePort</h2>
<p>참고 :&nbsp;<a href="https://docs.tizen.org/application/dotnet/guides/app-management/message-port/">https://docs.tizen.org/application/dotnet/guides/app-management/message-port/</a></p>
<ol>
<li>Message port 네임스페이스를 추가합니다.</li>
</ol>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Tizen</span><span style="color: #BBBBBB">.</span><span style="color: #000">Applications</span><span style="color: #BBBBBB">.</span><span style="color: #000">Messages</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #07A">using</span><span style="color: #BBBBBB"> </span><span style="color: #000">Tizen</span><span style="color: #999">;</span><span style="color: #BBBBBB"> </span><span style="color: #999">//</span><span style="color: #708090">For dlog</span></span></code></pre>
              <div>
            </div></div></div></body>
<ol start="2">
<li>Message Port 인스턴스를 생성합니다.</li>
</ol>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #999">[</span><span style="color: #000">XamlCompilation</span><span style="color: #999">(</span><span style="color: #000">XamlCompilationOptions</span><span style="color: #999">.</span><span style="color: #000">Compile</span><span style="color: #999">)]</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">partial</span><span style="color: #BBBBBB"> </span><span style="color: #07A">class</span><span style="color: #BBBBBB"> </span><span style="color: #000">MainPage</span><span style="color: #BBBBBB"> </span><span style="color: #999">:</span><span style="color: #BBBBBB"> </span><span style="color: #000">ContentPage</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #07A">static</span><span style="color: #BBBBBB"> </span><span style="color: #000">MessagePort</span><span style="color: #BBBBBB"> </span><span style="color: #000">_msgPort</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">readonly</span><span style="color: #BBBBBB"> </span><span style="color: #07A">string</span><span style="color: #BBBBBB"> </span><span style="color: #000">TAG</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">MessagePortSample</span><span style="color: #999">"</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainPage</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #DD4A68">InitializeComponent</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">            </span><span style="color: #000">_msgPort</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">MessagePort</span><span style="color: #999">(</span><span style="color: #999">"</span><span style="color: #690">sample_ui_port</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">        </span><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">        ...</span></span></code></pre>
              <div>
            </div></div></div></body>
<ol start="3">
<li>등록한 Port로 메시지를 받을 수 있도록 callback 함수를 등록합니다.</li>
</ol>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">private</span><span style="color: #BBBBBB"> </span><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MessageReceived_Callback</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">sender</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">MessageReceivedEventArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Log</span><span style="color: #999">.</span><span style="color: #DD4A68">Debug</span><span style="color: #999">(</span><span style="color: #000">TAG</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">Message Received</span><span style="color: #999">"</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Log</span><span style="color: #999">.</span><span style="color: #DD4A68">Debug</span><span style="color: #999">(</span><span style="color: #000">TAG</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">App ID: </span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Remote</span><span style="color: #999">.</span><span style="color: #000">AppId</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Log</span><span style="color: #999">.</span><span style="color: #DD4A68">Debug</span><span style="color: #999">(</span><span style="color: #000">TAG</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">PortName: </span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Remote</span><span style="color: #999">.</span><span style="color: #000">PortName</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Log</span><span style="color: #999">.</span><span style="color: #DD4A68">Debug</span><span style="color: #999">(</span><span style="color: #000">TAG</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">Trusted: </span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Remote</span><span style="color: #999">.</span><span style="color: #000">Trusted</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">Log</span><span style="color: #999">.</span><span style="color: #DD4A68">Debug</span><span style="color: #999">(</span><span style="color: #000">TAG</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">message: </span><span style="color: #999">"</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">.</span><span style="color: #000">Message</span><span style="color: #999">.</span><span style="color: #DD4A68">GetItem</span><span style="color: #BBBBBB"> </span><span style="color: #999">&lt;</span><span style="color: #07A">string</span><span style="color: #999">&gt;</span><span style="color: #BBBBBB"> </span><span style="color: #999">(</span><span style="color: #999">"</span><span style="color: #690">response data</span><span style="color: #999">"</span><span style="color: #999">));</span></span>
<span class="line"><span style="color: #999">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainPage</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #DD4A68">InitializeComponent</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_msgPort</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">MessagePort</span><span style="color: #999">(</span><span style="color: #999">"</span><span style="color: #690">sample_ui_port</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_msgPort</span><span style="color: #999">.</span><span style="color: #000">MessageReceived</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+=</span><span style="color: #BBBBBB"> </span><span style="color: #000">MessageReceived_Callback</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #999">}</span></span></code></pre>
              <div>
            </div></div></div></body>
<ol start="4">
<li>생성한 Message Port 인스턴스를 Listen 합니다.</li>
</ol>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">public</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">MainPage</span><span style="color: #999">()</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #DD4A68">InitializeComponent</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_msgPort</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">MessagePort</span><span style="color: #999">(</span><span style="color: #999">"</span><span style="color: #690">sample_ui_port</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #905">false</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_msgPort</span><span style="color: #999">.</span><span style="color: #000">MessageReceived</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">+=</span><span style="color: #BBBBBB"> </span><span style="color: #000">MessageReceived_Callback</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_msgPort</span><span style="color: #999">.</span><span style="color: #DD4A68">Listen</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #999">}</span></span></code></pre>
              <div>
            </div></div></div></body>
</div><div class="chapter" style="display: none;"><div></div><h1 id="ui-application-c">UI Application (C#)</h1><h2 id="send-message-to-service-application">Send Message to Service Application</h2>
<ol>
<li>Button을 클릭하면 Message를 Service Application으로 전송할 수 있도록 OnButtonClicked함수를 수정합니다.</li>
</ol>
<p>이전 챕터에서 만들었던 service application의 appid와 port 이름을 적고 Send API를 통해 메시지를 전송합니다.</p>
<body><div class="mt-2 mb-5">
              <div class="h-12 code-block-bar">
                <div class="copy-btn"></div>
              </div>
              <div class="relative">
                
                <pre is:raw="" class="astro-code" style="background-color: #f5f2f0; overflow-x: auto;"><code><span class="line"><span style="color: #07A">void</span><span style="color: #BBBBBB"> </span><span style="color: #DD4A68">OnButtonClicked</span><span style="color: #999">(</span><span style="color: #07A">object</span><span style="color: #BBBBBB"> </span><span style="color: #000">s</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">EventArgs</span><span style="color: #BBBBBB"> </span><span style="color: #000">e</span><span style="color: #999">)</span></span>
<span class="line"><span style="color: #999">{</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">string</span><span style="color: #BBBBBB"> </span><span style="color: #000">remoteAppId</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">org.example.sample_service_app</span><span style="color: #999">"</span><span style="color: #999">;</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">string</span><span style="color: #BBBBBB"> </span><span style="color: #000">remotePort</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">sample_service_port</span><span style="color: #999">"</span><span style="color: #999">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #07A">var</span><span style="color: #BBBBBB"> </span><span style="color: #000">msg</span><span style="color: #BBBBBB"> </span><span style="color: #A67F59">=</span><span style="color: #BBBBBB"> </span><span style="color: #07A">new</span><span style="color: #BBBBBB"> </span><span style="color: #000">Tizen</span><span style="color: #999">.</span><span style="color: #000">Applications</span><span style="color: #999">.</span><span style="color: #000">Bundle</span><span style="color: #999">();</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">msg</span><span style="color: #999">.</span><span style="color: #DD4A68">AddItem</span><span style="color: #999">(</span><span style="color: #999">"</span><span style="color: #690">data</span><span style="color: #999">"</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #999">"</span><span style="color: #690">Send_A_MESSAGE_TO_A_REMOTE_APP</span><span style="color: #999">"</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #BBBBBB">    </span><span style="color: #000">_msgPort</span><span style="color: #999">.</span><span style="color: #DD4A68">Send</span><span style="color: #999">(</span><span style="color: #000">msg</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">remoteAppId</span><span style="color: #999">,</span><span style="color: #BBBBBB"> </span><span style="color: #000">remotePort</span><span style="color: #999">);</span></span>
<span class="line"><span style="color: #999">}</span></span></code></pre>
              <div>
            </div></div></div></body>

</div><div class="chapter" style="display: none;"><div></div><h1 id="test-communicate">Test Communicate</h1><h2 id="test">Test</h2>
<p><strong>1. Service App 실행.</strong></p>
<img src="/TizenSchool/assets/images/tutorials/200/ServiceApp 실행.jpg" style="height:546px; width:1000px">
<p><strong>2. Device Manager로 로그 확인</strong></p>
<p>Alt + Shift + V 혹은 상단메뉴 Tools -&gt; Device Manager를 선택합니다.</p>
<p>앱을 실행 하고 정상적으로 실행 되었는지 Tag 에서 “sample_service_app” 만 Filtering 해서 로그를 확인합니다.</p>
<img src="/TizenSchool/assets/images/tutorials/200/DeviceManager_MessagePort.JPG" style="height:259px; width:1078px">
<p><strong>3. UI App 실행</strong></p>
<p>Visual Studio에서 Log Viewer를 키고 UI App을 실행합니다.</p>
<p>앱을 실행 하고 정상적으로 실행 되었는지 Tag 에서 “MessagePortSample” 만 Filtering 해서 로그를 확인합니다.</p>
<img src="/TizenSchool/assets/images/tutorials/200/UI App 실행.jpg" style="height:457px; width:1000px">
<p><strong>4. Message Port로 메시지 전송 및 응답메시지 받기</strong></p>
<p>UI앱에서 Send Message Button을 눌러 메시지를 전송하고, Service 앱에서 Log를 통해 메시지를 전달 받았는지 확인합니다.</p>
<p>그리고 UI 앱에서 응답 메시지 OK 를 받았는지 Log를 통해서 확인합니다.</p></div></div></astro-slot></div>
<div class="flex justify-center items-center h-12">
<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    border border-[#dfdfdf] bg-arrow-page-grey
  "></div>
<span class="font-extrabold w-28 text-center text-xl text-tutorial">1/11</span>

<div class="
    h-[30px] w-[30px] rounded-full bg-arrow 
    bg-[position:12px_7px] 
    bg-[size:8px] 
    bg-no-repeat
    rotate-180
    last:rotate-0
    bg-primary bg-arrow hover:bg-[#2aa29e] cursor-pointer
  "></div></div></astro-island>
    <div class="h-24 bg-gray-100">
      <div class="flex items-center h-full w-[1180px] mx-auto pl-2 text-lg border-t-4 border-primary">
        ©2023
        <span class="font-bold">Tizen School <a class="text-sm font-light underline text-blue-600 pl-1" href="https://github.com/Samsung/TizenSchool/commit/642c4c04779a63be966fa6579cbe2e444ddde584">642c4c04779a63be966fa6579cbe2e444ddde584</a>
        </span>
      </div>
    </div>
  </body>
</html>

